import{c as e,C as t,p as s,r as l}from"./vendor.c8c3c0c0.js";async function n(e){const t=await fetch(`https://chroniclingamerica.loc.gov/search/titles/results/?terms=colorado&format=json&rows=10&page=${e}`);if(t.status>400)throw new Error(`API Error. Status code: ${t.status}`);return await t.json()}function i(){return e("header",null,e("h1",null,"Simple Infinite Scroll"))}function*a(){let s;const l=new IntersectionObserver((e=>{e.forEach((e=>{e.target===s&&e.isIntersecting&&this.dispatchEvent(new CustomEvent("sentinal-visible",{bubbles:!0}))}))}),{root:null,rootMargin:"0px",threshold:1});this.schedule((e=>{requestAnimationFrame((()=>{l.observe(e),s=e}))})),yield e("div",{class:"sentinal"},e("strong",null,"Loading more..."));try{for({}of this)yield e(t,null)}finally{l.disconnect()}}function*r(t){for(const{items:s,hasMoreItems:l}of this)yield e("div",{class:"listing"},e("h2",null,"US Newspaper Directory: Colorado"),e("p",{class:"subtitle"},e("em",null,"Data provided by ",e("a",{href:"https://chroniclingamerica.loc.gov"},"https://chroniclingamerica.loc.gov"))),s.map((t=>e("div",{"crank-key":t.id,class:"tile"},e("div",{class:"tile-icon"},e("i",{class:"far fa-newspaper fa-2x"})),e("div",{class:"tile-content"},e("a",{href:t.url.replace(".json",""),class:"tile-title"},t.title),e("span",{class:"date-range"},t.start_year," â€“ ",t.end_year),e("div",{class:"tile-subtitle"},e("strong",null,"Publisher:")," ",t.publisher,e("br",null),e("strong",null,"Place of publication:")," ",t.place_of_publication))))),l?e(a,null):e("div",{class:"finish"},e("div",null,"ðŸŽ‰ ðŸŽ‰ ðŸŽ‰"),e("div",null,e("strong",null,e("em",null,"Congratulations, you scrolled to the end!"))),e("div",null,"ðŸŽˆ ðŸŽˆ")))}async function*o(t){let s=1,l=[],a=!0;for await({}of(this.addEventListener("sentinal-visible",(async()=>{if(a){s+=1;const e=await n(s);a=e.totalItems!==e.endIndex,l.push(...e.items),this.refresh()}})),this.schedule((async()=>{const e=await n(s);a=e.totalItems!==e.endIndex,l.push(...e.items),this.refresh()})),this))yield e("div",{class:"container grid-lg"},e(i,null),0===l.length&&e("div",{class:"hero"},e("h1",{class:"text-center text-gray"},"Loading..."),e("div",{class:"loading loading-lg"})),l.length>0&&e(r,{items:l,hasMoreItems:a}))}s.base("/crank-examples/simple-infinite-scroll"),s("*",(()=>{document.title="Simple Infinite Scroll",l.render(e(o,null),document.getElementById("app"))})),s();
