import{c as t,F as e,r as o,a as s}from"./vendor.404e63f8.js";const l="todos-crank";function n(){const t=localStorage.getItem("todos-crank-sequence");let e;return e=t?JSON.parse(t):{value:0},e.value+=1,localStorage.setItem("todos-crank-sequence",JSON.stringify(e)),e.value}function i(){const t=localStorage.getItem(l);return t?JSON.parse(t):[]}function c(){return i().filter((t=>!t.completed))}function a(){return i().filter((t=>t.completed))}function*d(e){const o=(t,e)=>{t.preventDefault(),t.stopPropagation();const o=t.target.elements[0].value.trim();o.length>0&&(this.dispatchEvent(new CustomEvent("edit-todo",{bubbles:!0,detail:{value:o,todo:e}})),this.dispatchEvent(new CustomEvent("stop-editing",{bubbles:!0})))},s=t=>{var e;null==(e=t.target.form)||e.requestSubmit()},l=t=>{"Escape"===t.key&&this.dispatchEvent(new CustomEvent("stop-editing",{bubbles:!0}))};for(const{todo:n}of this)yield t("form",{onsubmit:t=>o(t,n)},t("input",{type:"text",class:"edit",value:n.title,onblur:s,onkeydown:l}))}function*r(e){const o=t=>{this.dispatchEvent(new CustomEvent("delete-todo",{bubbles:!0,detail:t}))},s=(t,e)=>{this.dispatchEvent(new CustomEvent("change-status",{bubbles:!0,detail:{todo:t,completed:e}}))},l=()=>{this.dispatchEvent(new CustomEvent("start-editing",{bubbles:!0}))};for(const{todo:n}of this)yield t("div",{class:"view"},t("input",{type:"checkbox",class:"toggle",checked:n.completed,onchange:t=>s(n,t.target.checked)}),t("label",{ondblclick:l},n.title),t("button",{type:"button",class:"destroy",onclick:()=>o(n)}))}function*u(e){let o=!1;this.addEventListener("start-editing",(()=>{o=!0,this.schedule((t=>{t.querySelector(".edit").focus()})),this.refresh()})),this.addEventListener("stop-editing",(()=>{o=!1,this.refresh()}));for(const{todo:s}of this)yield t("li",{class:`${s.completed?"completed":""} ${o?"editing":""}`},t(o?d:r,{todo:s}))}function*h(e){const o=()=>{this.dispatchEvent(new CustomEvent("toggle-all-completed",{bubbles:!0}))};for(const{todos:s}of this){const e=s.every((t=>t.completed));yield t("section",{class:"main"},t("input",{class:"toggle-all",id:"toggle-all",type:"checkbox",checked:e,onchange:o}),t("label",{for:"toggle-all"},"Mark all as complete"),t("ul",{class:"todo-list"},s.map((e=>t(u,{"crank-key":e.id,todo:e})))))}}function*f(e){const o=t=>{t.preventDefault(),t.stopPropagation();const e=t.target.elements[0],o=e.value.trim();o.length>0&&(this.dispatchEvent(new CustomEvent("add-todo",{bubbles:!0,detail:o})),e.value="")};for({}of this)yield t("header",{class:"header"},t("h1",null,"todos"),t("form",{onsubmit:o},t("input",{type:"text",class:"new-todo",placeholder:"What needs to be done?",autofocus:!0})))}function*p(e){const o=()=>{this.dispatchEvent(new CustomEvent("clear-completed",{bubbles:!0}))};for(const{selected:s}of this){const e=c().length,l=a().length;yield t("footer",{class:"footer"},t("span",{class:"todo-count"},t("strong",null,e)," ",1===e?"item":"items"," left"),t("ul",{class:"filters"},t("li",null,t("a",{class:"all"===s?"selected":"",href:"/"},"All")),t("li",null,t("a",{class:"active"===s?"selected":"",href:"/active"},"Active")),t("li",null,t("a",{class:"completed"===s?"selected":"",href:"/completed"},"Completed"))),l>0&&t("button",{type:"button",class:"clear-completed",onclick:o},"Clear completed"))}}function*m(o){this.addEventListener("add-todo",(t=>{!function(t){const e=i();e.push({id:n(),title:t,completed:!1}),localStorage.setItem(l,JSON.stringify(e))}(t.detail),this.refresh()})),this.addEventListener("delete-todo",(t=>{!function(t){const e=i().filter((e=>e.id!=t.id));localStorage.setItem(l,JSON.stringify(e))}(t.detail),this.refresh()})),this.addEventListener("change-status",(t=>{const{todo:e,completed:o}=t.detail;!function(t,e){const o=i().map((o=>(o.id===t.id&&(o.completed=e),o)));localStorage.setItem(l,JSON.stringify(o))}(e,o),this.refresh()})),this.addEventListener("clear-completed",(()=>{!function(){const t=i().filter((t=>!t.completed));localStorage.setItem(l,JSON.stringify(t))}(),this.refresh()})),this.addEventListener("toggle-all-completed",(()=>{!function(){const t=i(),e=t.every((t=>t.completed));t.forEach((t=>t.completed=!e)),localStorage.setItem(l,JSON.stringify(t))}(),this.refresh()})),this.addEventListener("edit-todo",(t=>{const{todo:e,value:o}=t.detail;!function(t,e){const o=i().map((o=>(o.id===t.id&&(o.title=e),o)));localStorage.setItem(l,JSON.stringify(o))}(e,o),this.refresh()}));for(const{filter:s}of this){let o=[];const l=i().length;switch(s){case"all":o=i();break;case"active":o=c();break;case"completed":o=a()}yield t("section",{class:"todoapp"},t(f,null),l>0&&t(e,null,t(h,{todos:o}),t(p,{selected:s})))}}o.base="/crank-examples/todomvc/",o.add("/:filter",(e=>{const o=e.params.filter||"all";s.render(t(m,{filter:o}),document.getElementById("app"))}));o.start({fallback:"/"});
